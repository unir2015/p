<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<body>
  <div id="content">

    <!-- <button id="like-btn">лайк</button> -->

  </div>
  <button id="loadSave"></button>
  <div id="content-save"></div>
  
  <script>

let fetchData = (url) => {

  return new Promise((resolve, reject) => {
    fetch(url)
          .then((response) => response.json())
          .then((data) => resolve(data))
          .catch((error) => reject('Ошибка загрузки данных'));
  });
};





    let page = 1;
    // async function fetchPhotos() {
    //   const apiKey = 'J1YP-4khM09VwTucLBkrtVAw91pojlz46ncIXIS8fcI';
    //   try {
    //     const response = await fetch(`https://api.unsplash.com/photos/random?count=4&client_id=KV5nmDlgPIs0jjoRhFIufiIqQCfX1-a89DptZ1c3uc8`);
    //     const photos = await response.json();//photos/random?client_id=ВАШ_API_КЛЮЧ
    //     console.log("успешно");
    //     return photos;
    //   } catch (error) {
    //     console.log('Не успешно');
    //     console.error('Ошибка при загрузке фотографии: ', error);
    //     return[];
    //   }
    // }
    
   function loadMorePhotos() {
      const photos = fetchData('https://api.unsplash.com/photos/random?count=4&client_id=KV5nmDlgPIs0jjoRhFIufiIqQCfX1-a89DptZ1c3uc8');

        if (photos.length > 1) {
          photos.forEach(photo => {
          const photoElement = document.createElement('div');
          photoElement.classList.add('photo');
          const img = document.createElement('img');
          const nameAuthor = document.createElement('p');
          nameAuthor.classList.add('author');
          const userLike = document.createElement('p');
          userLike.classList.add('user-like');
          const btn = document.createElement('button');
          btn.id = 'like-btn';
          img.src = photo.urls.small;
          img.alt = photo.alt_description;
          nameAuthor.textContent = photo.user.name;
          userLike.textContent = '0';
          btn.textContent = 'лайк';
          photoElement.appendChild(img);
          photoElement.appendChild(nameAuthor);
          photoElement.appendChild(userLike);
          photoElement.appendChild(btn);
          content.appendChild(photoElement);

          
        });
        } else {
          const photoElement = document.createElement('div');
          photoElement.classList.add('photo');
          const img = document.createElement('img');
          img.classList.add('content-img');
          const nameAuthor = document.createElement('p');
          nameAuthor.classList.add('content-author');
          const userLike = document.createElement('p');
          userLike.classList.add('user-like');
          const btn = document.createElement('button');
          btn.id = 'like-btn';
          img.src = photos.urls.small;
          img.alt = photos.alt_description;
          nameAuthor.textContent = photos.user.name;
          userLike.textContent = '0';
          btn.textContent = 'лайк';
          photoElement.append(img);
          photoElement.append(nameAuthor);
          photoElement.append(userLike);
          photoElement.append(btn);
          content.append(photoElement);
        }
        
        
        
      }
  loadMorePhotos();
  

    // async function loadMorePhotos() {
    //   const photos = await fetchPhotos();
  
    //     photos
    //       const photoElement = document.createElement('div');
    //       photoElement.classList.add('photo');
    //       const img = document.createElement('img');
    //       img.src = photos.urls.small;
    //       img.alt = photos.alt_description;
    //       photoElement.append(img);
    //       content.append(photoElement);
        
        
    // }
    

  //   document.getElementById('save-btn').addEventListener('click', () => {
  //   const input = document.getElementById('input-text').value;
  //   localStorage.setItem('savedText', input);
  //   alert('Текст сохранен!');
  // });

  // document.addEventListener('DOMContentLoaded',  () => {
  //       // Загрузка сохраненных настроек
  //       const loadSetting = () => {
  //         const savedSetting = localStorage.getItem('furnitureSet');
  //         if (savedSetting) {
  //           const setting = JSON.parse(savedSetting);
  //           document.querySelector('').value = setting.tableColor;
  //           document.querySelector('').value = setting.tableMaterial;
  //           document.querySelector('').value = setting.chairColor;
  //           document.querySelector('').value = setting.chairMaterial;
  //         }
  //       };
  // });
      

//   document.getElementById('like-btn').addEventListener('click', function(event) {
//     if (event.target && event.target.matches('div.newClass')) {
//         console.log('New element clicked');
//     }
// });
      // // function likeBtnFunction() {
        const likeBtn = document.querySelector('#like-btn');
        // const ede = likeBtn.closest()
        console.log(likeBtn);
        likeBtn.addEventListener('click', () => {
          const likeText = document.querySelector('.user-like');
          const countLike = likeText.textContent;
          ++countLike;
          likeText.textContent = countLike.textContent;

          const furnitureSet = {
            imgSrc: document.querySelector('.content-img').src,
            imgAlt: document.querySelector('.content-img').alt,
            authorName: document.querySelector('.content-author').textContent,
            userLike: document.querySelector('.user-like').textContent
          };
          localStorage.setItem('furnitureSet', JSON.stringify(furnitureSet));
          alert('Комплект сохранен');
        });
  // }
//   if (document.readyState == 'loading') {
//   // ещё загружается, ждём события
//   document.addEventListener('DOMContentLoaded');
// } else {
//   // DOM готов!
//   likeBtnFunction();
// }

  </script>
</body>
</html>