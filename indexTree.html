<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<script src="./script.js" blocking></script>
		<title>Document</title>
	</head>
	<body>
		<div id="content">
			<!-- <button id="like-btn">лайк</button> -->
		</div>
		<button id="loadSave"></button>
		<div id="content-save"></div>

		<script>
			// let counter = localStorage.getItem("furnitureSet.userLike")
			// 	? parseInt(localStorage.getItem("furnitureSet.userLike"))
			// 	: 0;
			// const updateCounter = () => {
			// 	counter++;
			// 	localStorage.setItem("furnitureSet.userLike", counter.toString());
			// };

			// let furnitureSet = JSON.parse(localStorage.getItem("furnitureSet"));

			window.addEventListener("click", function (event) {
				if (event.target.hasAttribute("data-card")) {
					let gettingValue = localStorage.getItem("CardLikeSet");
					const card = event.target.closest(".photo");
					const cardId = card.dataset.id;
					let counter = 0;
					// updateCounter();
					// card.querySelector(".user-like").textContent = counter;

					if (gettingValue === null) {
						console.log("Создание localStorage");
						const CardLikeSet = [
							{
								id: cardId,
								imgSrc: card.querySelector(".content-img").src,
								imgAlt: card.querySelector(".content-img").alt,
								authorName: card.querySelector(".content-author").textContent,
								userLike: card.querySelector(".user-like").textContent,
							},
						];

						localStorage.setItem("CardLikeSet", JSON.stringify(CardLikeSet));
						// alert("Комплект сохранен");
					} else {
						let newCardLikeSet = JSON.parse(gettingValue);
						for (const count in newCardLikeSet) {
							
						

							
							// counter = counter + 1;
					
							// console.log('counter',counter);
							console.log('count' ,count);
							// console.log(newCardLikeSet.length - 1 );
							const lenLikeSet = newCardLikeSet.length - 1;
							console.log('длина',lenLikeSet);
							let index = newCardLikeSet[count].id;
							if (index === cardId) {
								console.log("Обновление localStorage");
								newCardLikeSet[count] = {
									id: cardId,
									imgSrc: card.querySelector(".content-img").src,
									imgAlt: card.querySelector(".content-img").alt,
									authorName: card.querySelector(".content-author").textContent,
									userLike: card.querySelector(".user-like").textContent,
								};
							}
							// }   {
								// let addCardLikeSet = JSON.parse(gettingValue);
								// console.log('else');
								// for (let count in newCardLikeSet) {
									
								// 	let indexAdd = newCardLikeSet[count].id;
								// 	// console.log(indexAdd);

								else if (count == lenLikeSet) {
										console.log("Добавление localStorage");
										const temp = {
											id: cardId,
											imgSrc: card.querySelector(".content-img").src,
											imgAlt: card.querySelector(".content-img").alt,
											authorName: card.querySelector(".content-author").textContent,
											userLike: card.querySelector(".user-like").textContent,
										};
										newCardLikeSet.push(temp);
										// localStorage.setItem("CardLikeSet", JSON.stringify(newCardLikeSet));
									// }
								}

							}
						

						localStorage.setItem("CardLikeSet", JSON.stringify(newCardLikeSet));
					}
				}
			});

			// });
		</script>
	</body>
</html>